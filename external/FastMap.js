var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Function.noop=function(){},Function.identity=function(t){return t},Function.by=function(t,e){e=e||Object.compare,t=t||Function.identity;var r=function(r,n){return e(t(r),t(n))};return r.compare=e,r.by=t,r},Function.get=function(t){return function(e){return Object.get(e,t)}};var e=r;function r(){throw new Error("Can't construct. GenericCollection is a mixin.")}var n=t.DOMTokenList||function(){};r.EmptyArray=Object.freeze([]),r.prototype.addEach=function(t,e,r){if(t&&(t instanceof Array||t instanceof n||t instanceof String))if(e)for(var o=0;o<t.length;o++)this.add(e.call(r,t[o]),o);else for(o=0;o<t.length;o++)this.add(t[o],o);else if(t&&Object(t)===t)if("function"==typeof t.forEach)e?t.map(e,r).forEach(this.add,this):t.forEach(this.add,this);else if("function"==typeof t.next){var i;if(o=0,e)for(;i=t.next().value;)this.add(e.call(r,i),o++);else for(;i=t.next().value;)this.add(i,o++)}else if("number"==typeof t.length)if(e)for(o=0;o<t.length;o++)this.add(e.call(r,t[o]),o);else for(o=0;o<t.length;o++)this.add(t[o],o);else e?Object.keys(t).forEach((function(n){this.add(e.call(r,t[n]),n)}),this):Object.keys(t).forEach((function(e){this.add(t[e],e)}),this);return this},r.prototype.deleteEach=function(t,e){return t.forEach((function(t){this.delete(t,e)}),this),this},r.prototype.forEach=function(t){var e=arguments[1];return this.reduce((function(r,n,o,i,s){t.call(e,n,o,i,s)}),void 0)},r.prototype.map=function(t){var e=arguments[1],r=[];return this.reduce((function(n,o,i,s,a){r.push(t.call(e,o,i,s,a))}),void 0),r},r.prototype.enumerate=function(t){null==t&&(t=0);var e=[];return this.reduce((function(r,n){e.push([t++,n])}),void 0),e},r.prototype.group=function(t,e,r){r=r||Object.equals;var n=[],o=[];return this.forEach((function(i,s,a){s=t.call(e,i,s,a);var c,h=o.indexOf(s,r);-1===h?(c=[],n.push([s,c]),o.push(s)):c=n[h][1],c.push(i)})),n},r.prototype.toArray=function(){return this.map(Function.identity)},r.prototype.toObject=function(){var t={};return this.reduce((function(e,r,n){t[n]=r}),void 0),t},r.from=function(){return this.apply(this,arguments)},r.prototype.filter=function(t){var e=arguments[1],r=this.constructClone();return this.reduce((function(n,o,i,s,a){t.call(e,o,i,s,a)&&r.add(o,i)}),void 0),r},r.prototype.every=function(t){var e=arguments[1];return this.reduce((function(r,n,o,i,s){return r&&t.call(e,n,o,i,s)}),!0)},r.prototype.some=function(t){var e=arguments[1];return this.reduce((function(r,n,o,i,s){return r||t.call(e,n,o,i,s)}),!1)},r.prototype.all=function(){return this.every(Boolean)},r.prototype.any=function(){return this.some(Boolean)},r.prototype.min=function(t){t=t||this.contentCompare||Object.compare;var e=!0;return this.reduce((function(r,n){return e?(e=!1,n):t(n,r)<0?n:r}),void 0)},r.prototype.max=function(t){t=t||this.contentCompare||Object.compare;var e=!0;return this.reduce((function(r,n){return e?(e=!1,n):t(n,r)>0?n:r}),void 0)},r.prototype.sum=function(t){return t=void 0===t?0:t,this.reduce((function(t,e){return t+e}),t)},r.prototype.average=function(t){var e=void 0===t?0:t,r=void 0===t?0:t;return this.reduce((function(t,n){e+=n,r+=1}),void 0),e/r},r.prototype.concat=function(){for(var t=this.constructClone(this),e=0;e<arguments.length;e++)t.addEach(arguments[e]);return t},r.prototype.flatten=function(){var t=this;return this.reduce((function(e,r){return r.forEach((function(t){this.push(t)}),e,t),e}),[])},r.prototype.zip=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),Array.unzip(t)},r.prototype.join=function(t){return this.reduce((function(e,r){return void 0===e?r:e+t+r}),void 0)},r.prototype.sorted=function(t,e,r){return(t=t||this.contentCompare||Object.compare).by?(e=t.by,t=t.compare||this.contentCompare||Object.compare):e=e||Function.identity,void 0===r&&(r=1),this.map((function(t){return{by:e(t),value:t}})).sort((function(e,n){return t(e.by,n.by)*r})).map((function(t){return t.value}))},r.prototype.reversed=function(){return this.constructClone(this).reverse()},r.prototype.clone=function(t,e){if(void 0===t)t=1/0;else if(0===t)return this;var r=this.constructClone();return this.forEach((function(n,o){r.add(Object.clone(n,t-1,e),o)}),this),r},r.prototype.only=function(){if(1===this.length)return this.one()},r.prototype.iterator=function(){return this.iterate.apply(this,arguments)},r._sizePropertyDescriptor={get:function(){return this.length},enumerable:!1,configurable:!0},Object.defineProperty(r.prototype,"size",r._sizePropertyDescriptor);var o={exports:{}};!function(){if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=v);var t=!1;if("function"==typeof WeakMap){var e=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var r=new e,n=Object.freeze({});if(r.set(n,1),1===r.get(n))return void(o.exports=WeakMap);t=!0}}var i=Object.getOwnPropertyNames,s=Object.defineProperty,a=Object.isExtensible,c="weakmap:",h="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),p=new Uint8Array(u);crypto.getRandomValues(p),h="weakmap:rand:"+Array.prototype.map.call(p,(function(t){return(t%36).toString(36)})).join("")+"___"}if(s(Object,"getOwnPropertyNames",{value:function(t){return i(t).filter(g)}}),"getPropertyNames"in Object){var f=Object.getPropertyNames;s(Object,"getPropertyNames",{value:function(t){return f(t).filter(g)}})}!function(){var t=Object.freeze;s(Object,"freeze",{value:function(e){return b(e),t(e)}});var e=Object.seal;s(Object,"seal",{value:function(t){return b(t),e(t)}});var r=Object.preventExtensions;s(Object,"preventExtensions",{value:function(t){return b(t),r(t)}})}();var l=!1,y=0,d=function(){this instanceof d||w();var t=[],e=[],r=y++;return Object.create(d.prototype,{get___:{value:O((function(n,o){var i,s=b(n);return s?r in s?s[r]:o:(i=t.indexOf(n))>=0?e[i]:o}))},has___:{value:O((function(e){var n=b(e);return n?r in n:t.indexOf(e)>=0}))},set___:{value:O((function(n,o){var i,s=b(n);return s?s[r]=o:(i=t.indexOf(n))>=0?e[i]=o:(i=t.length,e[i]=o,t[i]=n),this}))},delete___:{value:O((function(n){var o,i,s=b(n);return s?r in s&&delete s[r]:!((o=t.indexOf(n))<0||(i=t.length-1,t[o]=void 0,e[o]=e[i],t[o]=t[i],t.length=i,e.length=i,0))}))}})};d.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof e?function(){function r(){this instanceof d||w();var r,n=new e,o=void 0,i=!1;return r=t?function(t,e){return n.set(t,e),n.has(t)||(o||(o=new d),o.set(t,e)),this}:function(t,e){if(i)try{n.set(t,e)}catch(r){o||(o=new d),o.set___(t,e)}else n.set(t,e);return this},Object.create(d.prototype,{get___:{value:O((function(t,e){return o?n.has(t)?n.get(t):o.get___(t,e):n.get(t,e)}))},has___:{value:O((function(t){return n.has(t)||!!o&&o.has___(t)}))},set___:{value:O(r)},delete___:{value:O((function(t){var e=!!n.delete(t);return o&&o.delete___(t)||e}))},permitHostObjects___:{value:O((function(t){if(t!==v)throw new Error("bogus call to permitHostObjects___");i=!0}))}})}t&&"undefined"!=typeof Proxy&&(Proxy=void 0),r.prototype=d.prototype,o.exports=r,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),o.exports=d)}function v(t){t.permitHostObjects___&&t.permitHostObjects___(v)}function g(t){return!(t.substr(0,c.length)==c&&"___"===t.substr(t.length-3))}function b(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[h];if(e&&e.key===t)return e;if(a(t)){e={key:t};try{return s(t,h,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function O(t){return t.prototype=null,Object.freeze(t)}function w(){l||"undefined"==typeof console||(l=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}();var i="undefined"!=typeof WeakMap?WeakMap:o.exports,s=i,a=Object;Object.empty=Object.freeze(Object.create(null)),Object.isObject=function(t){return Object(t)===t},Object.getValueOf=function(t){return t&&"function"==typeof t.valueOf&&(t=t.valueOf()),t};var c=new s;Object.hash=function(t){return t&&"function"==typeof t.hash?""+t.hash():Object(t)===t?(c.has(t)||c.set(t,Math.random().toString(36).slice(2)),c.get(t)):""+t};var h=Object.prototype.hasOwnProperty;Object.owns=function(t,e){return h.call(t,e)},Object.has=function(t,e){if("object"!=typeof t)throw new Error("Object.has can't accept non-object: "+typeof t);if(t&&"function"==typeof t.has)return t.has(e);if("string"==typeof e)return e in t&&t[e]!==Object.prototype[e];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(t,e,r){if("object"!=typeof t)throw new Error("Object.get can't accept non-object: "+typeof t);return t&&"function"==typeof t.get?t.get(e,r):Object.has(t,e)?t[e]:r},Object.set=function(t,e,r){t&&"function"==typeof t.set?t.set(e,r):t[e]=r},Object.addEach=function(t,e,r){var n=3!==arguments.length||r;if(e)if("function"!=typeof e.forEach||e.hasOwnProperty("forEach"))if("number"==typeof e.length)for(var o=0;o<e.length;o++)t[o]=e[o];else for(var i,s=Object.keys(e),a=0;i=s[a];a++)!n&&Object.owns(t,i)||(t[i]=e[i]);else!0===e.isMap?e.forEach((function(e,r){t[r]=e})):e.forEach((function(e){t[e[0]]=e[1]}));return t},Object.defineEach=function(t,e,r,n,o,i){var s=3!==arguments.length||r;if(e)if("function"!=typeof e.forEach||e.hasOwnProperty("forEach"))if("number"==typeof e.length)for(var a=0;a<e.length;a++)Object.defineProperty(t,a,{value:e[a],writable:i,configurable:n,enumerable:o});else for(var c,h=Object.keys(e),u=0;c=h[u];u++)!s&&Object.owns(t,c)||Object.defineProperty(t,c,{value:e[c],writable:i,configurable:n,enumerable:o});else!0===e.isMap?e.forEach((function(e,r){Object.defineProperty(t,r,{value:e,writable:i,configurable:n,enumerable:o})})):e.forEach((function(e){Object.defineProperty(t,e[0],{value:e[1],writable:i,configurable:n,enumerable:o})}));return t},Object.forEach=function(t,e,r){for(var n,o=Object.keys(t),i=0;n=o[i];i++)e.call(r,t[n],n,t)},Object.map=function(t,e,r){for(var n,o=Object.keys(t),i=0,s=[];n=o[i];i++)s.push(e.call(r,t[n],n,t));return s},Object.values=function(t){return Object.map(t,Function.identity)},Object.concat=function(){for(var t={},e=0;e<arguments.length;e++)Object.addEach(t,arguments[e]);return t},Object.from=Object.concat,Object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},Object.equals=function(t,e,r,n){if(r=r||Object.equals,(t=Object.getValueOf(t))===(e=Object.getValueOf(e)))return!0;if(Object.isObject(t)){if((n=n||new s).has(t))return!0;n.set(t,!0)}if(Object.isObject(t)&&"function"==typeof t.equals)return t.equals(e,r,n);if(Object.isObject(e)&&"function"==typeof e.equals)return e.equals(t,r,n);if(Object.isObject(t)&&Object.isObject(e)&&Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){for(var o in t)if(!r(t[o],e[o],r,n))return!1;for(var o in e)if(!(o in t)||!r(e[o],t[o],r,n))return!1;return!0}return t!=t&&e!=e||(!t||!e)&&t===e},Object.compare=function(t,e){if((t=Object.getValueOf(t))===(e=Object.getValueOf(e)))return 0;var r=typeof t,n=typeof e;return"number"===r&&"number"===n?t-e:"string"===r&&"string"===n?t<e?-1/0:1/0:t&&"function"==typeof t.compare?t.compare(e):e&&"function"==typeof e.compare?-e.compare(t):0},Object.clone=function(t,e,r){if(t=Object.getValueOf(t),r=r||new s,void 0===e)e=1/0;else if(0===e)return t;if(Object.isObject(t)){if(!r.has(t))if(t&&"function"==typeof t.clone)r.set(t,t.clone(e,r));else{var n=Object.getPrototypeOf(t);if(null!==n&&n!==Object.prototype)throw new Error("Can't clone "+t);var o=Object.create(n);for(var i in r.set(t,o),t)o[i]=Object.clone(t[i],e-1,r)}return r.get(t)}return t},Object.clear=function(t){if(t&&"function"==typeof t.clear)t.clear();else for(var e=Object.keys(t),r=e.length;r;)delete t[e[--r]];return t};var u=a,p=f;function f(){throw new Error("Can't construct. GenericOrder is a mixin.")}f.prototype.equals=function(t,e){return e=e||this.contentEquals||u.equals,this===t||!!t&&this.length===t.length&&this.zip(t).every((function(t){return e(t[0],t[1])}))},f.prototype.compare=function(t,e){if(e=e||this.contentCompare||u.compare,this===t)return 0;if(!t)return 1;var r=Math.min(this.length,t.length),n=this.zip(t).reduce((function(t,n,o){return 0===t?o>=r?t:e(n[0],n[1]):t}),0);return 0===n?this.length-t.length:n},f.prototype.toJSON=function(){return this.toArray()};var l=e,y=p,d=i,v=Array.prototype.splice,g=Array.prototype.slice;Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.nativeFrom=Array.from;var b="undefined"!=typeof Symbol;function O(t,e){Object.defineProperty(Array.prototype,t,{value:e,writable:!0,configurable:!0,enumerable:!1})}Array.from=function(t,e,r){if(b&&t&&("function"==typeof t[Symbol.iterator]||"function"==typeof e))return Array.nativeFrom(t,e,r);var n=[];return n.addEach(t),n},Array.unzip=function(t){for(var e=[],r=1/0,n=0;n<t.length;n++){var o=t[n];t[n]=o.toArray(),o.length<r&&(r=o.length)}for(n=0;n<t.length;n++){o=t[n];for(var i=0;i<o.length;i++)i<r&&i in o&&(e[i]=e[i]||[],e[i][n]=o[i])}return e},O("addEach",l.prototype.addEach),O("deleteEach",l.prototype.deleteEach),O("toArray",l.prototype.toArray),O("toObject",l.prototype.toObject),O("all",l.prototype.all),O("any",l.prototype.any),O("min",l.prototype.min),O("max",l.prototype.max),O("sum",l.prototype.sum),O("average",l.prototype.average),O("only",l.prototype.only),O("flatten",l.prototype.flatten),O("zip",l.prototype.zip),O("enumerate",l.prototype.enumerate),O("group",l.prototype.group),O("sorted",l.prototype.sorted),O("reversed",l.prototype.reversed),O("constructClone",(function(t){var e=new this.constructor;return e.addEach(t),e})),O("has",(function(t,e){return-1!==this.findValue(t,e)})),O("get",(function(t,e){if(+t!==t)throw new Error("Indicies must be numbers");return!t in this?e:this[t]})),O("set",(function(t,e){return this[t]=e,!0})),O("add",(function(t){return this.push(t),!0})),O("delete",(function(t,e){var r=this.findValue(t,e);return-1!==r&&(this.spliceOne(r),!0)})),O("deleteAll",(function(t,e){e=e||this.contentEquals||Object.equals;for(var r=0,n=0;n<this.length;)e(t,this[n])?(this.swap(n,1),r++):n++;return r})),Array.prototype.find||O("find",(function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),r=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<r;){var i=e[o];if(t.call(n,i,o,e))return i;o++}}));var w={};function _(t,e){"undefined"!=typeof console&&"function"==typeof console.warn&&!0!==e&&!1===w.hasOwnProperty(t)&&(console.warn(t),w[t]++)}var j=Object.getOwnPropertyDescriptor(Array.prototype,"find").value;function m(t,e,r){this.array=t,this.start=e??0,this.end=r}if(O("find",(function(t,e,r){return"function"==typeof arguments[0]&&this instanceof Array?j.apply(this,arguments):(_("Array#find usage is deprecated please use Array#findValue"),this.findValue.apply(this,arguments))})),O("findValue",(function(t,e,r){if(r)throw new Error("Array#findValue does not support third argument: index");for(e=e||this.contentEquals||Object.equals,r=0;r<this.length;r++)if(r in this&&e(t,this[r]))return r;return-1})),O("findLast",(function(t,e){return _("Array#findLast function is deprecated please use Array#findLastValue instead."),this.findLastValue.apply(this,arguments)})),O("findLastValue",(function(t,e){e=e||this.contentEquals||Object.equals;var r=this.length;do{if(--r in this&&e(this[r],t))return r}while(r>0);return-1})),O("swap",(function(t,e,r){var n,o,i,s,a;if(t>this.length&&(this.length=t),void 0!==r){if(n=[t,e],Array.isArray(r)||(r=g.call(r)),i=0,(o=r.length)<1e3){for(;i<o;i++)n[i+2]=r[i];return v.apply(this,n)}for(a=v.apply(this,n);i<o;){for(n=[t+i,0],s=2;s<1002&&i<o;s++,i++)n[s]=r[i];v.apply(this,n)}return a}return void 0!==e?v.call(this,t,e):void 0!==t?v.call(this,t):[]})),O("peek",(function(){return this[0]})),O("poke",(function(t){this.length>0&&(this[0]=t)})),O("peekBack",(function(){if(this.length>0)return this[this.length-1]})),O("pokeBack",(function(t){this.length>0&&(this[this.length-1]=t)})),O("one",(function(){for(var t in this)if(Object.owns(this,t))return this[t]})),Array.prototype.clear||O("clear",(function(){return this.length=0,this})),O("compare",(function(t,e){var r,n,o;if(e=e||Object.compare,this===t)return 0;if(!t||!Array.isArray(t))return y.prototype.compare.call(this,t,e);for(n=this.length<t.length?this.length:t.length,r=0;r<n;r++)if(r in this){if(!(r in t))return-1;if(o=e(this[r],t[r]))return o}else if(r in t)return 1;return this.length-t.length})),O("equals",(function(t,e){e=e||Object.equals;var r=0,n=this.length;if(this===t)return!0;if(!t||!Array.isArray(t))return y.prototype.equals.call(this,t);if(n!==t.length)return!1;for(;r<n;++r)if(r in this){if(!(r in t))return!1;if(!e(this[r],t[r]))return!1}else if(r in t)return!1;return!0})),O("clone",(function(t,e){if(null==t)t=1/0;else if(0===t)return this;if((e=e||new d).has(this))return e.get(this);var r=new Array(this.length);for(var n in e.set(this,r),this)r[n]=Object.clone(this[n],t-1,e);return r})),O("iterate",(function(t,e){return new m(this,t,e)})),void 0===Array.prototype.spliceOne&&O("spliceOne",(function(t,e){var r=this.length;if(r)if(1===arguments.length){for(;t<r;)this[t]=this[t+1],t++;this.length--}else this[t]=e})),O("Iterator",m),m.prototype.__iterationObject=null,Object.defineProperty(m.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:null})}}),m.prototype.next=function(){return this.start===(null==this.end?this.array.length:this.end)?(this._iterationObject.done=!0,this._iterationObject.value=void 0):this._iterationObject.value=this.array[this.start++],this._iterationObject},!RegExp.escape){var C=/[-[\]{}()*+?.\\^$|,#\s]/g;RegExp.escape=function(t){return t.replace(C,"\\$&")}}var E=M,A=a,x=e;function M(t,e){var r=e&&t&&t.values&&t.values();if(r&&"function"==typeof r.next)return r;if(!(this instanceof M))return new M(t);if(Array.isArray(t)||"string"==typeof t)return M.iterate(t);if((t=A(t))instanceof M)return t;if(t.next)this.next=function(){return t.next()};else if(t.iterate){var n=t.iterate();this.next=function(){return n.next()}}else{if("[object Function]"!==A.prototype.toString.call(t))throw new TypeError("Can't iterate "+t);this.next=t}}M.prototype.forEach=x.prototype.forEach,M.prototype.map=x.prototype.map,M.prototype.filter=x.prototype.filter,M.prototype.every=x.prototype.every,M.prototype.some=x.prototype.some,M.prototype.any=x.prototype.any,M.prototype.all=x.prototype.all,M.prototype.min=x.prototype.min,M.prototype.max=x.prototype.max,M.prototype.sum=x.prototype.sum,M.prototype.average=x.prototype.average,M.prototype.flatten=x.prototype.flatten,M.prototype.zip=x.prototype.zip,M.prototype.enumerate=x.prototype.enumerate,M.prototype.sorted=x.prototype.sorted,M.prototype.group=x.prototype.group,M.prototype.reversed=x.prototype.reversed,M.prototype.toArray=x.prototype.toArray,M.prototype.toObject=x.prototype.toObject,M.prototype.iterator=x.prototype.iterator,M.prototype.__iterationObject=null,A.defineProperty(M.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:void 0})}}),M.prototype.constructClone=function(t){var e=[];return e.addEach(t),e},M.prototype.mapIterator=function(t){var e=M(this),r=arguments[1],n=0;if("[object Function]"!=A.prototype.toString.call(t))throw new TypeError;return new e.constructor((function(){if(!0!==e._iterationObject.done){var o=t.call(r,e.next().value,n++,e);e._iterationObject.value=o}return e._iterationObject}))},M.prototype.filterIterator=function(t){var e=M(this),r=arguments[1],n=0;if("[object Function]"!=A.prototype.toString.call(t))throw new TypeError;return new e.constructor((function(){for(var o;;){if(!0===(o=e.next()).done)return o;if(t.call(r,o.value,n++,e))return o}}))},M.prototype.reduce=function(t){var e,r=M(this),n=arguments[1],o=arguments[2],i=0;if("[object Function]"!=A.prototype.toString.call(t))throw new TypeError;if(!0===(e=r.next()).done){if(arguments.length>1)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}for(n=arguments.length>1?t.call(o,n,e.value,i,r):e.value,i++;;){if(!0===(e=r.next()).done)return n;n=t.call(o,n,e.value,i,r),i++}},M.prototype.concat=function(){return M.concat(Array.prototype.concat.apply(this,arguments))},M.prototype.dropWhile=function(t){var e,r,n=M(this),o=arguments[1],i=!1,s=0;if("[object Function]"!=A.prototype.toString.call(t))throw new TypeError;for(;!0!==(r=n.next()).done;){if(!t.call(o,r.value,s,n)){i=!0,e=r.value;break}s++}return i?n.constructor([e]).concat(n):n.constructor([])},M.prototype.takeWhile=function(t){var e=M(this),r=arguments[1],n=0;if("[object Function]"!=A.prototype.toString.call(t))throw new TypeError;return new e.constructor((function(){if(!0!==e._iterationObject.done){var o=e.next().value;t.call(r,o,n++,e)?e._iterationObject.value=o:(e._iterationObject.done=!0,e._iterationObject.value=void 0)}return e._iterationObject}))},M.prototype.zipIterator=function(){return M.unzip(Array.prototype.concat.apply(this,arguments))},M.prototype.enumerateIterator=function(t){return M.count(t).zipIterator(this)},M.iterate=function(t){var e;return e=0,new M((function(){if("object"==typeof t)for(;!(e in t);){if(e>=t.length){this._iterationObject.done=!0,this._iterationObject.value=void 0;break}e+=1}else e>=t.length&&(this._iterationObject.done=!0,this._iterationObject.value=void 0);return this._iterationObject.done||(this._iterationObject.value=t[e],e+=1),this._iterationObject}))},M.cycle=function(t,e){var r;return arguments.length<2&&(e=1/0),new M((function(){var n,o;return r&&(o=r()),r&&!0!==o.done||(e>0?(e--,n=M.iterate(t),o=(r=n.next.bind(n))()):(this._iterationObject.done=!0,o=this._iterationObject)),o}))},M.concat=function(t){var e;return t=M(t),new M((function(){var r,n;return e&&(n=e()),n&&!0!==n.done?n:!1===(n=t.next()).done?(r=M(n.value),(e=r.next.bind(r))()):n}))},M.unzip=function(t){return 0===(t=M(t).map(M)).length?new M([]):new M((function(){var e,r,n=t.map((function(t){return!0===(r=t.next()).done&&(e=!0),r.value}));return e?(this._iterationObject.done=!0,this._iterationObject.value=void 0):this._iterationObject.value=n,this._iterationObject}))},M.zip=function(){return M.unzip(Array.prototype.slice.call(arguments))},M.chain=function(){return M.concat(Array.prototype.slice.call(arguments))},M.range=function(t,e,r){return arguments.length<3&&(r=1),arguments.length<2&&(e=t,t=0),t=t||0,r=r||1,new M((function(){t>=e&&(this._iterationObject.done=!0,this._iterationObject.value=void 0);var n=t;return t+=r,this._iterationObject.value=n,this._iterationObject}))},M.count=function(t,e){return M.range(t,1/0,e)},M.repeat=function(t,e){return new M.range(e).mapIterator((function(){return t}))};var P=a,k=E,L=D;function D(){throw new Error("Can't construct. GenericMap is a mixin.")}function N(t,e){this.key=t,this.value=e}D.prototype.isMap=!0,D.prototype.addEach=function(t){var e;if(t&&P(t)===t)if("function"==typeof t.forEach)!0===t.isMap?t.forEach((function(t,e){this.set(e,t)}),this):t.forEach((function(t){this.set(t[0],t[1])}),this);else if("number"==typeof t.length)for(e=0;e<t.length;e++)this.add(t[e],e);else P.keys(t).forEach((function(e){this.set(e,t[e])}),this);else if(t&&"number"==typeof t.length)for(e=0;e<t.length;e++)this.add(t[e],e);return this},D.prototype.get=function(t,e){var r=this.store.get(new this.Item(t));return r?r.value:arguments.length>1?(console.log("Use of a second argument as default value is deprecated to match standards"),e):this.getDefault(t)},D.prototype.set=function(t,e){var r=new this.Item(t,e),n=this.store.get(r);return n?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,n.value),n.value=e,this.dispatchesMapChanges&&this.dispatchMapChange(t,e)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,void 0),this.store.add(r)&&this.length++,this.dispatchesMapChanges&&this.dispatchMapChange(t,e)),this},D.prototype.add=function(t,e){return this.set(e,t)},D.prototype.has=function(t){return this.store.has(new this.Item(t))},D.prototype.delete=function(t){var e=new this.Item(t);if(this.store.has(e)){var r=this.store.get(e).value;return this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,r),this.store.delete(e),this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0}return!1},D.prototype.clear=function(){var t,e;if(this.dispatchesMapChanges&&(this.forEach((function(t,e){this.dispatchBeforeMapChange(e,t)}),this),t=this.keysArray()),this.store.clear(),this.length=0,this.dispatchesMapChanges)for(var r=0;e=t[r];r++)this.dispatchMapChange(e)},D.prototype.reduce=function(t,e,r){return this.store.reduce((function(e,n){return t.call(r,e,n.value,n.key,this)}),e,this)},D.prototype.reduceRight=function(t,e,r){return this.store.reduceRight((function(e,n){return t.call(r,e,n.value,n.key,this)}),e,this)},D.prototype.keysArray=function(){return this.map((function(t,e){return e}))},D.prototype.keys=function(){return new k(this.keysArray(),!0)},D.prototype.valuesArray=function(){return this.map(Function.identity)},D.prototype.values=function(){return new k(this.valuesArray(),!0)},D.prototype.entriesArray=function(){return this.map((function(t,e){return[e,t]}))},D.prototype.entries=function(){return new k(this.entriesArray(),!0)},D.prototype.items=function(){return this.entriesArray()},D.prototype.equals=function(t,e){return e=e||P.equals,this===t||(t&&"function"==typeof t.every?t.length===this.length&&t.every((function(t,r){return e(this.get(r),t)}),this):P.keys(t).length===this.length&&P.keys(t).every((function(r){return e(this.get(r),t[r])}),this))},D.prototype.toJSON=function(){return this.entriesArray()},D.prototype.Item=N,N.prototype.equals=function(t){return P.equals(this.key,t.key)&&P.equals(this.value,t.value)},N.prototype.compare=function(t){return P.compare(this.key,t.key)};var S=e,q=L,z=B;function B(t,e){if(!(this instanceof B))return new B(t,e);e=e||Function.noop,this.getDefault=e,this.store=Object.create(null),this.length=0,this.addEach(t)}B.Dict=B,Object.addEach(B.prototype,S.prototype),Object.addEach(B.prototype,q.prototype),B.from=S.from,B.prototype.constructClone=function(t){return new this.constructor(t,this.getDefault)},B.prototype.assertString=function(t){if("string"!=typeof t)throw new TypeError("key must be a string but Got "+t)},Object.defineProperty(B.prototype,"$__proto__",{writable:!0}),Object.defineProperty(B.prototype,"_hasProto",{get:function(){return this.hasOwnProperty("$__proto__")&&void 0!==this._protoValue}}),Object.defineProperty(B.prototype,"_protoValue",{get:function(){return this.$__proto__},set:function(t){this.$__proto__=t}}),Object.defineProperty(B.prototype,"size",S._sizePropertyDescriptor),B.prototype.get=function(t,e){return this.assertString(t),"__proto__"===t?this._hasProto?this._protoValue:arguments.length>1?e:this.getDefault(t):t in this.store?this.store[t]:arguments.length>1?e:this.getDefault(t)},B.prototype.set=function(t,e){this.assertString(t);var r="__proto__"===t;return(r?this._hasProto:t in this.store)?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,r?this._protoValue:this.store[t]),r?this._protoValue=e:this.store[t]=e,this.dispatchesMapChanges&&this.dispatchMapChange(t,e),!1):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,void 0),this.length++,r?this._protoValue=e:this.store[t]=e,this.dispatchesMapChanges&&this.dispatchMapChange(t,e),!0)},B.prototype.has=function(t){return this.assertString(t),"__proto__"===t?this._hasProto:t in this.store},B.prototype.delete=function(t){return this.assertString(t),"__proto__"===t?!!this._hasProto&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this._protoValue),this._protoValue=void 0,this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0):t in this.store&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this.store[t]),delete this.store[t],this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0)},B.prototype.clear=function(){var t;for(t in this._hasProto&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange("__proto__",this._protoValue),this._protoValue=void 0,this.dispatchesMapChanges&&this.dispatchMapChange("__proto__",void 0)),this.store)this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this.store[t]),delete this.store[t],this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0);this.length=0},B.prototype.reduce=function(t,e,r){this._hasProto&&(e=t.call(r,e,"$__proto__","__proto__",this));var n=this.store;for(var o in this.store)e=t.call(r,e,n[o],o,this);return e},B.prototype.reduceRight=function(t,e,r){var n=this,o=this.store;return e=Object.keys(this.store).reduceRight((function(e,i){return t.call(r,e,o[i],i,n)}),e),this._hasProto?t.call(r,e,this._protoValue,"__proto__",n):e},B.prototype.one=function(){var t;for(t in this.store)return this.store[t];return this._protoValue},B.prototype.toJSON=function(){return this.toObject()};var H=R,F=e,V=p;function R(t,e,r){return R._init(R,this,t,e,r)}function G(t){this.head=t,this.at=t.next}function I(t){this.value=t,this.prev=null,this.next=null}R._init=function(t,e,r,n,o){if(!(e instanceof t))return new t(r,n,o);var i=e.head=new e.Node;i.next=i,i.prev=i,e.contentEquals=n||Object.equals,e.getDefault=o||Function.noop,e.length=0,e.addEach(r)},R.List=R,Object.addEach(R.prototype,F.prototype),Object.addEach(R.prototype,V.prototype),R.from=F.from,R.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.getDefault)},R.prototype.find=function(t,e,r){e=e||this.contentEquals;for(var n=this.head,o=this.scan(r,n.next);o!==n;){if(e(o.value,t))return o;o=o.next}},R.prototype.findLast=function(t,e,r){e=e||this.contentEquals;for(var n=this.head,o=this.scan(r,n.prev);o!==n;){if(e(o.value,t))return o;o=o.prev}},R.prototype.has=function(t,e){return!!this.find(t,e)},R.prototype.get=function(t,e){var r=this.find(t,e);return r?r.value:this.getDefault(t)},R.prototype.delete=function(t,e){var r=this.findLast(t,e);return!!r&&(r.delete(),this.length--,!0)},R.prototype.deleteAll=function(t,e){e=e||this.contentEquals;for(var r=this.head,n=r.next,o=0;n!==r;)e(t,n.value)&&(n.delete(),o++),n=n.next;return this.length-=o,o},R.prototype.clear=function(){this.head.next=this.head.prev=this.head,this.length=0},R.prototype.add=function(t){var e=new this.Node(t);return this._addNode(e)},R.prototype._addNode=function(t){return this.head.addBefore(t),this.length++,!0},R.prototype.push=function(){for(var t=this.head,e=0;e<arguments.length;e++){var r=arguments[e],n=new this.Node(r);t.addBefore(n)}this.length+=arguments.length},R.prototype.unshift=function(){for(var t=this.head,e=0;e<arguments.length;e++){var r=arguments[e],n=new this.Node(r);t.addAfter(n),t=n}this.length+=arguments.length},R.prototype._shouldPop=function(){var t,e=this.head;return e.prev!==e&&(t=e.prev.value),t},R.prototype.pop=function(t,e){var r,n=this.head;if(n.prev!==n){r=n.prev.value;var o=this.length-1,i=t?t.call(this,r,o):void 0;n.prev.delete(),this.length--,e&&e.call(this,r,o,i)}return r},R.prototype.shift=function(t,e){var r,n=this.head;if(n.prev!==n){r=n.next.value;var o=t?t.call(this,r,0):void 0;n.next.delete(),this.length--,e&&e.call(this,r,0,o)}return r},R.prototype.peek=function(){if(this.head!==this.head.next)return this.head.next.value},R.prototype.poke=function(t){this.head!==this.head.next?this.head.next.value=t:this.push(t)},R.prototype.one=function(){return this.peek()},R.prototype.scan=function(t,e){var r=this.head;if("number"==typeof t){var n=t;if(n>=0)for(t=r.next;n&&(n--,(t=t.next)!=r););else for(t=r;n<0&&(n++,(t=t.prev)!=r););return t}return t||e},R.prototype.slice=function(t,e){var r=[],n=this.head;for(t=this.scan(t,n.next),e=this.scan(e,n);t!==e&&t!==n;)r.push(t.value),t=t.next;return r},R.prototype.splice=function(t,e){return this.swap(t,e,Array.prototype.slice.call(arguments,2))},R.prototype.swap=function(t,e,r,n,o){var i=t;t=this.scan(t,this.head),null==e&&(e=1/0),r=Array.from(r);for(var s=[],a=t;e--&&e>=0&&a!==this.head;)s.push(a.value),a=a.next;n&&n.call(this,t,r,s),a=t;var c=0;for(a=t;c<s.length;c++,a=a.next)a.delete();for(null==i&&a===this.head&&(a=this.head.next),c=0;c<r.length;c++){var h=new this.Node(r[c]);a.addBefore(h)}return this.length+=r.length-s.length,o&&o.call(this,t,r,s),s},R.prototype.reverse=function(){var t=this.head;do{var e=t.next;t.next=t.prev,t.prev=e,t=t.next}while(t!==this.head);return this},R.prototype.sort=function(){this.swap(0,this.length,this.sorted.apply(this,arguments))},R.prototype.reduce=function(t,e){for(var r=arguments[2],n=this.head,o=n.next;o!==n;)e=t.call(r,e,o.value,o,this),o=o.next;return e},R.prototype.reduceRight=function(t,e){for(var r=arguments[2],n=this.head,o=n.prev;o!==n;)e=t.call(r,e,o.value,o,this),o=o.prev;return e},R.prototype.updateIndexes=function(t,e){for(;t!==this.head;)t.index=e++,t=t.next},R.prototype.iterate=function(){return new G(this.head)},G.prototype.__iterationObject=null,Object.defineProperty(G.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:null})}}),G.prototype.next=function(){if(this.at===this.head)this._iterationObject.done=!0,this._iterationObject.value=void 0;else{var t=this.at.value;this.at=this.at.next,this._iterationObject.value=t}return this._iterationObject},R.prototype.Node=I,I.prototype.delete=function(){this.prev.next=this.next,this.next.prev=this.prev},I.prototype.addBefore=function(t){var e=this.prev;this.prev=t,t.prev=e,e.next=t,t.next=this},I.prototype.addAfter=function(t){var e=this.next;this.next=t,t.next=e,e.prev=t,t.prev=this};var W=T;function T(){throw new Error("Can't construct. GenericSet is a mixin.")}T.prototype.isSet=!0,T.prototype.union=function(t){var e=this.constructClone(this);return e.addEach(t),e},T.prototype.intersection=function(t){return this.constructClone(this.filter((function(e){return t.has(e)})))},T.prototype.difference=function(t){var e=this.constructClone(this);return e.deleteEach(t),e},T.prototype.symmetricDifference=function(t){var e=this.union(t),r=this.intersection(t);return e.difference(r)},T.prototype.deleteAll=function(t){return+this.delete(t)},T.prototype.equals=function(t,e){var r=this;return t&&"function"==typeof t.reduce&&this.length===t.length&&t.reduce((function(t,n){return t&&r.has(n,e)}),!0)},T.prototype.forEach=function(t){var e=arguments[1];return this.reduce((function(r,n,o,i,s){t.call(e,n,n,i,s)}),void 0)},T.prototype.toJSON=function(){return this.toArray()},T.prototype.contains=function(t){return this.has(t)},T.prototype.remove=function(t){return this.delete(t)},T.prototype.toggle=function(t){this.has(t)?this.delete(t):this.add(t)};var J=function(t,e){return t};T.prototype.valuesArray=function(){return this.map(J)};var U=function(t,e){return[e,t]};T.prototype.entriesArray=function(){return this.map(U)};var $=K;function K(){}K.ascii={intersection:"+",through:"-",branchUp:"+",branchDown:"+",fromBelow:".",fromAbove:"'",fromBoth:"+",strafe:"|"},K.unicodeRound={intersection:"╋",through:"━",branchUp:"┻",branchDown:"┳",fromBelow:"╭",fromAbove:"╰",fromBoth:"┣",strafe:"┃"},K.unicodeSharp={intersection:"╋",through:"━",branchUp:"┻",branchDown:"┳",fromBelow:"┏",fromAbove:"┗",fromBoth:"┣",strafe:"┃"};var Q=z,X=H,Y=e,Z=W,tt=$,et=rt;function rt(t,e,r,n){if(!(this instanceof rt))return new rt(t,e,r,n);e=e||Object.equals,r=r||Object.hash,n=n||Function.noop,this.contentEquals=e,this.contentHash=r,this.getDefault=n;var o=this;this.buckets=new this.Buckets(null,(function(){return new o.Bucket})),this.length=0,this.addEach(t)}rt.FastSet=rt,Object.addEach(rt.prototype,Y.prototype),Object.addEach(rt.prototype,Z.prototype),rt.from=Y.from,rt.prototype.Buckets=Q,rt.prototype.Bucket=X,rt.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},rt.prototype.has=function(t){var e=this.contentHash(t);return this.buckets.get(e).has(t)},rt.prototype.get=function(t,e){if(e)throw new Error("FastSet#get does not support second argument: equals");var r=this.contentHash(t),n=this.buckets;return n.has(r)?n.get(r).get(t):this.getDefault(t)},rt.prototype.delete=function(t,e){if(e)throw new Error("FastSet#delete does not support second argument: equals");var r=this.contentHash(t),n=this.buckets;if(n.has(r)){var o=n.get(r);if(o.delete(t))return this.length--,0===o.length&&n.delete(r),!0}return!1},rt.prototype.clear=function(){this.buckets.clear(),this.length=0},rt.prototype.add=function(t){var e=this.contentHash(t),r=this.buckets;return r.has(e)||r.set(e,new this.Bucket(null,this.contentEquals)),!r.get(e).has(t)&&(r.get(e).add(t),this.length++,!0)},rt.prototype.reduce=function(t,e){var r=arguments[2],n=this.buckets,o=0;return n.reduce((function(e,n){return n.reduce((function(e,n){return t.call(r,e,n,o++,this)}),e,this)}),e,this)},rt.prototype.one=function(){if(this.length>0)return this.buckets.one().one()},rt.prototype.iterate=function(){return this.buckets.valuesArray().flatten().iterate()},rt.prototype.log=function(t,e,r,n){t=t||tt.unicodeSharp,e=e||this.logNode,r||(r=console.log,n=console),r=r.bind(n);for(var o,i,s,a,c=this.buckets,h=c.size,u=c.keys(),p=0;o=u.next().value;)p===h-1?(i=t.fromAbove,s=" "):0===p?(i=t.branchDown,s=t.strafe):(i=t.fromBoth,s=t.strafe),a=c.get(o),r.call(n,i+t.through+t.branchDown+" "+o),a.forEach((function(o,i){var c,h,u;i===a.head.prev?(c=t.fromAbove,h=" "):(c=t.fromBoth,h=t.strafe),e(i,(function(e){u?r.call(n,s+" "+h+"  "+e):(r.call(n,s+" "+c+t.through+t.through+e),u=!0)}),(function(e){r.call(n,s+" "+t.strafe+"  "+e)}))})),p++},rt.prototype.logNode=function(t,e){var r=t.value;Object(r)===r?JSON.stringify(r,null,4).split("\n").forEach((function(t){e(" "+t)})):e(" "+r)};var nt,ot,it={exports:{}},st={exports:{}},at=e,ct=W;void 0!==t.Set&&"function"==typeof t.Set.prototype.values&&((nt=st.exports=t.Set).Set=nt,nt.prototype.reduce=function(t,e){var r=arguments[2];return this.forEach((function(n){e=t.call(r,e,n,this)})),e},nt.prototype.reduceRight=function(t,e){for(var r,n=arguments[2],o=this.values(),i=this.size,s=new Array(this.size),a=i;r=o.next().value;)s[--a]=r;for(;a<i;)e=t.call(n,e,s[a++],this);return e},nt.prototype.equals=function(t,e){var r=this;return t&&"function"==typeof t.reduce&&this.size===(t.size||t.length)&&t.reduce((function(t,n){return t&&r.has(n,e)}),!0)},nt.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},nt.prototype.toJSON=function(){return this.entriesArray()},nt.prototype.one=function(){if(this.size>0)return this.values().next().value},nt.prototype.pop=function(){if(this.size){for(var t,e,r=this.values();t=r.next().value;)e=t;return this.delete(e,this.size-1),e}},nt.prototype.shift=function(){if(this.size){var t=this.values().next().value;return this.delete(t,0),t}},Object.defineProperty(nt.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),nt.from=function(t){var e=new this;return e.addEach(t),e},Object.addEach(nt.prototype,at.prototype,!1),Object.addEach(nt.prototype,ct.prototype,!1));var ht=H,ut=et,pt=E;(ot=function t(e,r,n,o){return t._init(t,this,e,r,n,o)})._init=function(t,e,r,n,o,i){if(!(e instanceof t))return new t(r,n,o,i);n=n||Object.equals,o=o||Object.hash,i=i||Function.noop,e.contentEquals=n,e.contentHash=o,e.getDefault=i,e.order=new e.Order(void 0,n),e.store=new e.Store(void 0,(function(t,e){return n(t.value,e.value)}),(function(t){return o(t.value)})),e.length=0,e.addEach(r)},ot.Set=ot,ot.CollectionsSet=ot,Object.addEach(ot.prototype,at.prototype),Object.addEach(ot.prototype,ct.prototype),ot.from=at.from,Object.defineProperty(ot.prototype,"size",at._sizePropertyDescriptor),ot.prototype.Order=ht,ot.prototype.Store=ut,ot.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},ot.prototype.has=function(t){var e=new this.order.Node(t);return this.store.has(e)},ot.prototype.get=function(t,e){if(e)throw new Error("Set#get does not support second argument: equals");var r=new this.order.Node(t);return(r=this.store.get(r))?r.value:this.getDefault(t)},ot.prototype.add=function(t){var e=new this.order.Node(t);return!this.store.has(e)&&(this.length,this.order.add(t),e=this.order.head.prev,this.store.add(e),this.length++,!0)},ot.prototype.delete=function(t,e){if(e)throw new Error("Set#delete does not support second argument: equals");var r=new this.order.Node(t);return!!this.store.has(r)&&(r=this.store.get(r),this.store.delete(r),this.order.splice(r,1),this.length--,!0)},ot.prototype.pop=function(){if(this.length){var t=this.order.head.prev.value;return this.delete(t),t}},ot.prototype.shift=function(){if(this.length){var t=this.order.head.next.value;return this.delete(t),t}},ot.prototype.one=function(){if(this.length>0)return this.store.one().value},ot.prototype.clear=function(){this.store.clear(),this.order.clear(),this.length=0},Object.defineProperty(ot.prototype,"_clear",{value:ot.prototype.clear}),ot.prototype.reduce=function(t,e){var r=arguments[2],n=this.order,o=0;return n.reduce((function(e,n){return t.call(r,e,n,o++,this)}),e,this)},ot.prototype.reduceRight=function(t,e){var r=arguments[2],n=this.order,o=this.length-1;return n.reduceRight((function(e,n){return t.call(r,e,n,o--,this)}),e,this)},ot.prototype.iterate=function(){return this.order.iterate()},ot.prototype.values=function(){return new pt(this.valuesArray(),!0)},ot.prototype.log=function(){var t=this.store;return t.log.apply(t,arguments)},nt?(nt.prototype.valuesArray=ct.prototype.valuesArray,nt.prototype.entriesArray=ct.prototype.entriesArray,st.exports=nt,nt.CollectionsSet=ot):st.exports=ot;var ft,lt,yt,dt=e;if(void 0!==t.Map&&"function"==typeof t.Set.prototype.values){var vt;lt=ft=it.exports=t.Map,ft.Map=ft,vt={}.__proto__===Object.prototype?function(){this.__proto__=Ct}:function(){Object.defineProperties(this,observableSetProperties)},Object.defineProperty(ft.prototype,"makeObservable",{value:vt,writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(ft.prototype,"makePropertyObservable",{value:function(){},writable:!0,configurable:!0,enumerable:!1}),ft.prototype.constructClone=function(t){return new this.constructor(t)},ft.prototype.isMap=!0,ft.prototype.addEach=function(t){if(t&&Object(t)===t)if("function"==typeof t.forEach)!0===t.isMap?t.forEach((function(t,e){this.set(e,t)}),this):t.forEach((function(t){this.set(t[0],t[1])}),this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);else Object.keys(t).forEach((function(e){this.set(e,t[e])}),this);else if(t&&"number"==typeof t.length)for(e=0;e<t.length;e++)this.add(t[e],e);return this},ft.prototype.add=function(t,e){return this.set(e,t)},ft.prototype.reduce=function(t,e){var r=arguments[2];return this.forEach((function(n,o,i){e=t.call(r,e,n,o,this)})),e},ft.prototype.reduceRight=function(t,e){for(var r,n=arguments[2],o=this.keys(),i=this.size,s=new Array(this.size),a=0;r=o.next().value;)s[--i]=r;for(;a++<i;)e=t.call(n,e,this.get(s[a]),s[a],this);return e},ft.prototype.equals=function(t,e){return e=e||Object.equals,this===t||(t&&"function"==typeof t.every?t.size===this.size&&t.every((function(t,r){return e(this.get(r),t)}),this):Object.keys(t).length===this.size&&Object.keys(t).every((function(r){return e(this.get(r),t[r])}),this))};var gt=function(t,e){return e};ft.prototype.keysArray=function(){return this.map(gt)};var bt=function(t,e){return t};ft.prototype.valuesArray=function(){return this.map(bt)};var Ot=function(t,e){return[e,t]};ft.prototype.entriesArray=function(){return this.map(Ot)},ft.prototype.toJSON=function(){return this.entriesArray()},ft.prototype.items=function(){return this.entriesArray()},ft.from=function(t){var e=new this;return e.addEach(t),e},Object.defineProperty(ft.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0});var wt=ft.prototype.clear,_t=ft.prototype.set,jt=ft.prototype.delete,mt={clear:{value:function(){var t;this.dispatchesMapChanges&&(this.forEach((function(t,e){this.dispatchBeforeMapChange(e,t)}),this),t=this.keysArray()),wt.call(this),this.dispatchesMapChanges&&t.forEach((function(t){this.dispatchMapChange(t)}),this)},writable:!0,configurable:!0},set:{value:function(t,e){var r=this.get(t);return r?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,r),_t.call(this,t,e),this.dispatchesMapChanges&&this.dispatchMapChange(t,e)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,void 0),_t.call(this,t,e),this.dispatchesMapChanges&&this.dispatchMapChange(t,e)),this},writable:!0,configurable:!0},delete:{value:function(t){return!!this.has(t)&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this.get(t)),jt.call(this,t),this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0)}}};Object.addEach(ft.prototype,dt.prototype,!1);var Ct=Object.create(ft.prototype,mt)}var Et=st.exports.CollectionsSet,At=L;yt=ft=function t(e,r,n,o){if(!(this instanceof t))return new t(e,r,n,o);r=r||Object.equals,n=n||Object.hash,o=o||Function.noop,this.contentEquals=r,this.contentHash=n,this.getDefault=o,this.store=new Et(void 0,(function(t,e){return r(t.key,e.key)}),(function(t){return n(t.key)})),this.length=0,this.addEach(e)},ft.Map=ft,Object.addEach(ft.prototype,dt.prototype),Object.addEach(ft.prototype,At.prototype),Object.defineProperty(ft.prototype,"size",dt._sizePropertyDescriptor),ft.from=dt.from,ft.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},ft.prototype.log=function(t,e,r,n){e=e||this.logNode,this.store.log(t,(function(t,r,n){e(t.value.value,r,n)}),r,n)},ft.prototype.logNode=function(t,e){e(" key: "+t.key),e(" value: "+t.value)},lt?(it.exports=lt,lt.CollectionsMap=yt):it.exports=yt;var xt={},Mt=it.exports,Pt=xt.ObjectChangeDescriptor=function(t){return this.name=t,this.isActive=!1,this._willChangeListeners=null,this._changeListeners=null,this};Object.defineProperties(Pt.prototype,{name:{value:null,writable:!0},isActive:{value:!1,writable:!0},_willChangeListeners:{value:null,writable:!0},willChangeListeners:{get:function(){return this._willChangeListeners||(this._willChangeListeners=new this.willChangeListenersRecordConstructor(this.name))}},_changeListeners:{value:null,writable:!0},changeListeners:{get:function(){return this._changeListeners||(this._changeListeners=new this.changeListenersRecordConstructor(this.name))}},changeListenersRecordConstructor:{value:Dt,writable:!0},willChangeListenersRecordConstructor:{value:St,writable:!0}});var kt=xt.ListenerGhost=Object.create(null),Lt=new Mt;function Dt(t){var e=Lt.get(t);return e||(e="handle",e+=t,e+="Change",Lt.set(t,e)),this._current=null,this._current=null,this.specificHandlerMethodName=e,this}xt.ChangeListenersRecord=Dt,Object.defineProperties(Dt.prototype,{_current:{value:null,writable:!0},current:{get:function(){return this._current},set:function(t){this._current=t}},ListenerGhost:{value:kt,writable:!0},ghostCount:{value:0,writable:!0},maxListenerGhostRatio:{value:.3,writable:!0},listenerGhostFilter:{value:function(t){return t!==this.ListenerGhost}},removeCurrentGostListenersIfNeeded:{value:function(){return this._current&&this.ghostCount/this._current.length>this.maxListenerGhostRatio&&(this.ghostCount=0,this._current=this._current.filter(this.listenerGhostFilter,this)),this._current}},dispatchBeforeChange:{value:!1,writable:!0},genericHandlerMethodName:{value:"handlePropertyChange",writable:!0}}),xt.WillChangeListenersRecord=St;var Nt=new Mt;function St(t){var e=Nt.get(t);return e||(e="handle",e+=t,e+="WillChange",Nt.set(t,e)),this.specificHandlerMethodName=e,this}St.prototype=new Dt,St.prototype.constructor=St,St.prototype.genericHandlerMethodName="handlePropertyWillChange";var qt=zt;function zt(){throw new Error("This is an abstract interface. Mix it. Don't construct it")}var Bt=it.exports,Ht=i,Ft=xt,Vt=Ft.ObjectChangeDescriptor,Rt=Ft.ListenerGhost;zt.debug=!0;var Gt=new Ht,It=new Bt;function Wt(t,e,r,n){if(t&&t._current){var o,i,s,a,c,h=t.specificHandlerMethodName,u=t.genericHandlerMethodName,p=Rt;if(Array.isArray(t._current)){for(s=0,a=(o=t.removeCurrentGostListenersIfNeeded()).length;s<a;s++)if((c=o[s])!==p){if(!(i=c[h]||c[u]||c).call)throw new Error("No event listener for "+t.specificHandlerName+" or "+t.genericHandlerName+" or call on "+i);i.call(c,r,e,n)}}else{if(!(i=(c=t._current)[h]||c[u]||c).call)throw new Error("No event listener for "+t.specificHandlerName+" or "+t.genericHandlerName+" or call on "+i);i.call(c,r,e,n)}}}zt.ObjectChangeDescriptor=function(){},zt.prototype.getOwnPropertyChangeDescriptor=function(t){var e,r=Gt.get(this);if(r||(r=Object.create(null),Gt.set(this,r)),void 0===(e=r[t])){var n=It.get(t);return n||(n=(n=String(t))&&n[0].toUpperCase()+n.slice(1),It.set(t,n)),r[t]=new Vt(n)}return e},zt.prototype.hasOwnPropertyChangeDescriptor=function(t){var e=Gt.get(this);return!(!e||t&&void 0===e[t])},zt.prototype.addOwnPropertyChangeListener=function(t,e,r){this.makeObservable&&!this.isObservable&&this.makeObservable();var n=zt.getOwnPropertyChangeDescriptor(this,t),o=r?n.willChangeListeners:n.changeListeners;zt.makePropertyObservable(this,t),o._current?Array.isArray(o._current)?o._current.push(e):o._current=[o._current,e]:o._current=e;var i=this;return function(){zt.removeOwnPropertyChangeListener(i,t,e,r),i=null}},zt.prototype.addBeforeOwnPropertyChangeListener=function(t,e){return zt.addOwnPropertyChangeListener(this,t,e,!0)},zt.prototype.removeOwnPropertyChangeListener=function t(e,r,n){var o,i=zt.getOwnPropertyChangeDescriptor(this,e);if((o=n?i._willChangeListeners:i._changeListeners)&&o._current)if(o._current===r)o._current=null;else{var s=o._current.lastIndexOf(r);if(-1===s)throw new Error("Can't remove property change listener: does not exist: property name"+JSON.stringify(e));i.isActive?(o.ghostCount=o.ghostCount+1,o._current[s]=t.ListenerGhost):o._current.spliceOne(s)}},zt.prototype.removeOwnPropertyChangeListener.ListenerGhost=Rt,zt.prototype.removeBeforeOwnPropertyChangeListener=function(t,e){return zt.removeOwnPropertyChangeListener(this,t,e,!0)},zt.prototype.dispatchOwnPropertyChange=function t(e,r,n){var o,i=zt.getOwnPropertyChangeDescriptor(this,e);if(!i.isActive){i.isActive=!0,o=n?i._willChangeListeners:i._changeListeners;try{t.dispatchEach(o,e,r,this)}finally{i.isActive=!1}}},zt.prototype.dispatchOwnPropertyChange.dispatchEach=Wt,Wt.ListenerGhost=Rt,zt.prototype.dispatchBeforeOwnPropertyChange=function(t,e){return zt.dispatchOwnPropertyChange(this,t,e,!0)};var Tt=new Ht;new Ht;var Jt={get:void 0,set:void 0,configurable:!0,enumerable:!1};zt.prototype.makePropertyObservable=function(t){var e=Tt.get(this);if(!e||void 0===e.get(t)){if(!e){if(Array.isArray(this))return;if(!Object.isExtensible(this))throw new Error("Can't make property "+JSON.stringify(t)+" observable on "+this+" because object is not extensible");e=new Bt,Tt.set(this,e)}var r,n=this;do{if(r=Object.getOwnPropertyDescriptor(n,t))break;n=Object.getPrototypeOf(n)}while(n);if(r){if(!r.configurable)return;if(!r.writable&&!r.set)return}else r={value:void 0,enumerable:!0,writable:!0,configurable:!0};e.set(t,r),"value"in r?(Jt.get=function t(){return t.overriddenDescriptor.value},Jt.set=function t(e){var r,n,o=t.overriddenDescriptor;if(e!==o.value){if(!(n=(r=t.descriptor).isActive)){r.isActive=!0;try{t.dispatchEach(r._willChangeListeners,t.key,o.value,this)}finally{}}if(o.value=e,!n)try{t.dispatchEach(r._changeListeners,t.key,e,this)}finally{r.isActive=!1}}},Jt.set.dispatchEach=Wt,Jt.set.key=t,Jt.get.overriddenDescriptor=Jt.set.overriddenDescriptor=r,Jt.set.descriptor=Gt.get(this)[t],Jt.enumerable=r.enumerable,Jt.configurable=!0):(Jt.get=r.get,Jt.set=function e(){var r,n,o,i=e.overriddenGetter.call(this);if(1===arguments.length?e.overriddenSetter.call(this,arguments[0]):2===arguments.length?e.overriddenSetter.call(this,arguments[0],arguments[1]):e.overriddenSetter.apply(this,arguments),(o=e.overriddenGetter.call(this))!==i){if(!(n=(r=e.descriptor).isActive)){r.isActive=!0;try{e.dispatchEach(r._willChangeListeners,t,i,this)}finally{}}if(!n)try{e.dispatchEach(r._changeListeners,t,o,this)}finally{r.isActive=!1}}},Jt.enumerable=r.enumerable,Jt.configurable=!0,Jt.set.dispatchEach=Wt,Jt.set.overriddenSetter=r.set,Jt.set.overriddenGetter=r.get,Jt.set.descriptor=Gt.get(this)[t]),Object.defineProperty(this,t,Jt)}},zt.getOwnPropertyChangeDescriptor=function(t,e){return t.getOwnPropertyChangeDescriptor?t.getOwnPropertyChangeDescriptor(e):zt.prototype.getOwnPropertyChangeDescriptor.call(t,e)},zt.hasOwnPropertyChangeDescriptor=function(t,e){return t.hasOwnPropertyChangeDescriptor?t.hasOwnPropertyChangeDescriptor(e):zt.prototype.hasOwnPropertyChangeDescriptor.call(t,e)},zt.addOwnPropertyChangeListener=function(t,e,r,n){if(Object.isObject(t))return t.addOwnPropertyChangeListener?t.addOwnPropertyChangeListener(e,r,n):this.prototype.addOwnPropertyChangeListener.call(t,e,r,n)},zt.removeOwnPropertyChangeListener=function(t,e,r,n){if(Object.isObject(t))return t.removeOwnPropertyChangeListener?t.removeOwnPropertyChangeListener(e,r,n):zt.prototype.removeOwnPropertyChangeListener.call(t,e,r,n)},zt.dispatchOwnPropertyChange=function(t,e,r,n){if(Object.isObject(t))return t.dispatchOwnPropertyChange?t.dispatchOwnPropertyChange(e,r,n):zt.prototype.dispatchOwnPropertyChange.call(t,e,r,n)},zt.addBeforeOwnPropertyChangeListener=function(t,e,r){return zt.addOwnPropertyChangeListener(t,e,r,!0)},zt.removeBeforeOwnPropertyChangeListener=function(t,e,r){return zt.removeOwnPropertyChangeListener(t,e,r,!0)},zt.dispatchBeforeOwnPropertyChange=function(t,e,r){return zt.dispatchOwnPropertyChange(t,e,r,!0)},zt.makePropertyObservable=function(t,e){return t.makePropertyObservable?t.makePropertyObservable(e):zt.prototype.makePropertyObservable.call(t,e)};var Ut=et,$t=qt,Kt=Ut;Object.addEach(Ut.prototype,$t.prototype);var Qt=i,Xt=it.exports,Yt=xt,Zt=Yt.ObjectChangeDescriptor,te=Yt.ChangeListenersRecord,ee=Yt.ListenerGhost,re=ne;function ne(){throw new Error("Can't construct. MapChanges is a mixin.")}var oe=new Qt;function ie(t){this.name=t,this.isActive=!1,this._willChangeListeners=null,this._changeListeners=null}ie.prototype=new Zt,ie.prototype.constructor=ie,ie.prototype.changeListenersRecordConstructor=ae,ie.prototype.willChangeListenersRecordConstructor=he;var se=new Xt;function ae(t){var e=se.get(t);return e||(e="handle",e+=t.slice(0,1).toUpperCase(),e+=t.slice(1),e+="MapChange",se.set(t,e)),this.specificHandlerMethodName=e,this}ae.prototype=new te,ae.prototype.constructor=ae,ae.prototype.genericHandlerMethodName="handleMapChange";var ce=new Xt;function he(t){var e=ce.get(t);return e||(e="handle",e+=t.slice(0,1).toUpperCase(),e+=t.slice(1),e+="MapWillChange",ce.set(t,e)),this.specificHandlerMethodName=e,this}he.prototype=new te,he.prototype.constructor=he,he.prototype.genericHandlerMethodName="handleMapWillChange",ne.prototype.getAllMapChangeDescriptors=function(){return oe.has(this)||oe.set(this,new Xt),oe.get(this)},ne.prototype.getMapChangeDescriptor=function(t){var e=this.getAllMapChangeDescriptors();return t=t||"",e.has(t)||e.set(t,new ie(t)),e.get(t)};var ue=new Qt,pe={get:function(){return ue.get(this)},set:function(t){return ue.set(this,t)},configurable:!0,enumerable:!1};ne.prototype.addMapChangeListener=function(t,e,r){!this.isObservable&&this.makeObservable&&this.makeObservable();var n,o=this.getMapChangeDescriptor(e);(n=r?o.willChangeListeners:o.changeListeners)._current?Array.isArray(n._current)?n._current.push(t):n._current=[n._current,t]:n._current=t,void 0===Object.getOwnPropertyDescriptor(this.__proto__||Object.getPrototypeOf(this),"dispatchesMapChanges")&&Object.defineProperty(this.__proto__||Object.getPrototypeOf(this),"dispatchesMapChanges",pe),this.dispatchesMapChanges=!0;var i=this;return function(){i&&(i.removeMapChangeListener(t,e,r),i=null)}},ne.prototype.removeMapChangeListener=function(t,e,r){var n,o=this.getMapChangeDescriptor(e);if((n=r?o.willChangeListeners:o.changeListeners)._current)if(n._current===t)n._current=null;else{var i=n._current.lastIndexOf(t);if(-1===i)throw new Error("Can't remove map change listener: does not exist: token "+JSON.stringify(e));o.isActive?(n.ghostCount=n.ghostCount+1,n._current[i]=ee):n._current.spliceOne(i)}},ne.prototype.dispatchMapChange=function(t,e,r){var n=this.getAllMapChangeDescriptors(),o=ee;n.forEach((function(n,i){if(!n.isActive){var s=r?n.willChangeListeners:n.changeListeners;if(s&&s._current){var a=s.specificHandlerMethodName;if(Array.isArray(s._current)){if(s._current.length){var c,h,u,p=s.removeCurrentGostListenersIfNeeded();n.isActive=!0;try{for(c=0,h=p.length;c<h;c++)if((u=p[c])!==o)if(u[a])u[a](e,t,this);else{if(!u.call)throw new Error("Handler "+u+" has no method "+a+" and is not callable");u.call(u,e,t,this)}}finally{n.isActive=!1}}}else{n.isActive=!0;try{if((u=s._current)[a])u[a](e,t,this);else{if(!u.call)throw new Error("Handler "+u+" has no method "+a+" and is not callable");u.call(u,e,t,this)}}finally{n.isActive=!1}}}}}),this)},ne.prototype.addBeforeMapChangeListener=function(t,e){return this.addMapChangeListener(t,e,!0)},ne.prototype.removeBeforeMapChangeListener=function(t,e){return this.removeMapChangeListener(t,e,!0)},ne.prototype.dispatchBeforeMapChange=function(t,e){return this.dispatchMapChange(t,e,!0)};var fe=Kt,le=e,ye=L,de=qt,ve=re,ge=be;function be(t,e,r,n){if(!(this instanceof be))return new be(t,e,r,n);e=e||Object.equals,r=r||Object.hash,n=n||Function.noop,this.contentEquals=e,this.contentHash=r,this.getDefault=n,this.store=new fe(void 0,(function(t,r){return e(t.key,r.key)}),(function(t){return r(t.key)})),this.length=0,this.addEach(t)}be.FastMap=be,Object.addEach(be.prototype,le.prototype),Object.addEach(be.prototype,ye.prototype),Object.addEach(be.prototype,de.prototype),Object.addEach(be.prototype,ve.prototype),be.from=le.from,be.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},be.prototype.log=function(t,e){e=e||this.stringify,this.store.log(t,e)},be.prototype.stringify=function(t,e){return e+JSON.stringify(t.key)+": "+JSON.stringify(t.value)};export default ge;
